(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5887)}])},5887:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Home}});var t=r(5893),l=r(9008),i=r.n(l),a=r(7747),o=r(5161),s=r(2883),c=r(4225),d=r(6237),h=r(3717),x=r(4292),u=r(6948),m=r(9993),j=r(2091),p=r(7771);function Header(){let{toggleColorMode:e}=(0,o.If)(),n=(0,o.ff)("dark","light"),r=(0,o.ff)(j.TLr,j.Mei),l=(0,o.ff)("gray.100","gray.900"),i=(0,t.jsx)(s.r,{href:"https://lynx.pink/buymeacoffee/",isExternal:!0,children:(0,t.jsx)(c.z,{leftIcon:(0,t.jsx)(j.$0H,{}),colorScheme:"pink",variant:"solid",ml:4,children:"Sponsor"})});return(0,t.jsx)(a.xu,{pos:"relative",children:(0,t.jsx)(d.m.header,{bg:l,w:"full",overflowY:"hidden",children:(0,t.jsx)(d.m.div,{h:"4.5rem",mx:"auto",maxW:"1200px",children:(0,t.jsxs)(h.k,{w:"full",h:"full",px:"6",align:"center",justify:"space-between",children:[(0,t.jsx)(h.k,{align:"center",children:(0,t.jsx)("b",{children:"Magnets"})}),(0,t.jsxs)(h.k,{justify:"flex-end",w:"full",maxW:"824px",align:"center",color:"gray.400",children:[(0,t.jsx)(x.U,{spacing:"5",children:(0,t.jsx)(s.r,{isExternal:!0,href:"https://github.com/4ndv/magnets",children:(0,t.jsx)(u.J,{as:p.RrF,display:"block",transition:"color 0.2s",w:"5",h:"5",_hover:{color:"gray.600"}})})}),(0,t.jsx)(m.h,{size:"md",fontSize:"lg","aria-label":"Switch to ".concat(n," mode"),variant:"ghost",color:"current",ml:{base:"0",md:"3"},onClick:e,icon:(0,t.jsx)(r,{})}),i]})]})})})})}var f=r(6702),g=r(2177),k=r(4834),v=r(5418),w=r(6479),b=r(4529),C=r(967),y=r(5541),I=r(9778),_=r(3486),z=r(4859),F=r(6205),A=r(4346),E=r(7169),S=r(4253),N=r(8318),M=r(3816),H=r(8718),L=r.n(H),R=r(8764);let T=["infoHash","name","announce","xl","length"];async function parse(e){let n=await (0,M.ZP)(e),r=L()(n,T);return!r.xl&&r.length&&(r.xl=r.length,delete r.length),r.announce=r.announce.join("\n"),r}let Q={link:"",valid:!0},q=(0,b.Ue)(e=>({...Q,changeLink:n=>{let{target:{value:r}}=n;e({link:r,valid:!0})},parseAndValidate:async n=>{try{let r=await parse(n);return e({valid:!0}),r}catch(n){return e({valid:!1}),!1}},reset:()=>{e(Q)}}));function ImportMagnetModal(e){let{replaceEditorState:n}=e,r=q(e=>e.valid),l=q(e=>e.parseAndValidate),i=q(e=>e.link),a=q(e=>e.changeLink),o=q(e=>e.reset),{isOpen:s,onOpen:d,onClose:h}=(0,C.q)({onOpen:()=>o()}),importLink=async()=>{let e=await l(i);e&&(n(e),h())};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.z,{leftIcon:(0,t.jsx)(N.owE,{}),colorScheme:"teal",variant:"outline",onClick:d,children:"Import from magnet link"}),(0,t.jsxs)(y.u_,{isOpen:s,onClose:h,size:"xl",children:[(0,t.jsx)(I.Z,{}),(0,t.jsxs)(_.h,{children:[(0,t.jsx)(z.x,{children:"Import from magnet link"}),(0,t.jsx)(F.o,{}),(0,t.jsx)(A.f,{children:(0,t.jsx)(E.g,{placeholder:"magnet:?xt=urn:btih:WJWICNR2YGRDM5STQWTQFLWBA6SJLANV&dn=example&xl=3071934464&tr=https%3A%2F%2Fexample.com%2Fannounce",value:i,onChange:a,isInvalid:!r,rows:10})}),(0,t.jsxs)(S.m,{children:[(0,t.jsx)(c.z,{colorScheme:"red",mr:3,onClick:h,children:"Cancel"}),(0,t.jsx)(c.z,{colorScheme:"teal",variant:"solid",onClick:()=>importLink(),children:"Import"})]})]})]})]})}var B=r(4153),D=r(7405),O=r(8652),W=r(2798),V=r(7294),Z=r(2512),U=r(7239);function Dropzone(e){let{onFileAccepted:n}=e,r=(0,V.useCallback)(e=>{n(e[0])},[n]),{getRootProps:l,getInputProps:i,isDragActive:a}=(0,Z.uI)({onDrop:r,accept:".torrent",maxFiles:1,multiple:!1}),s=a?"Drop the files here ...":"Drag 'n' drop .torrent file here, or click to select files",c=(0,o.ff)("gray.100","gray.600"),d=(0,o.ff)(a?"teal.300":"gray.300",a?"teal.500":"gray.500");return(0,t.jsxs)(U.M,{p:10,cursor:"pointer",bg:a?c:"transparent",_hover:{bg:c},transition:"background-color 0.2s ease",borderRadius:4,border:"3px dashed",borderColor:d,...l(),children:[(0,t.jsx)("input",{...i()}),(0,t.jsx)(u.J,{as:p.QZL,mr:2}),(0,t.jsx)("p",{children:s})]})}let J=(0,b.Ue)(e=>({valid:!0,parseAndValidate:async n=>{let t=await new Promise((e,t)=>{let l=new r.g.FileReader;l.onload=()=>e(R.lW.from(l.result)),l.onerrror=t,l.readAsArrayBuffer(n)});try{let n=await parse(t);return e({valid:!0}),n}catch(n){return e({valid:!1}),!1}},reset:()=>{e({valid:!0})}}));function ImportTorrentFileModal(e){let{replaceEditorState:n}=e,r=J(e=>e.valid),l=J(e=>e.parseAndValidate),i=J(e=>e.reset),{isOpen:a,onOpen:o,onClose:s}=(0,C.q)({onOpen:()=>i()}),importFile=async e=>{let r=await l(e);r&&(n(r),s())},d=null;return r||(d=(0,t.jsxs)(B.b,{status:"error",borderRadius:4,mt:5,children:[(0,t.jsx)(D.z,{}),(0,t.jsx)(O.C,{mr:2,children:"Invalid file"}),(0,t.jsx)(W.X,{children:"Choose another .torrent file"})]})),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.z,{leftIcon:(0,t.jsx)(p.QZL,{}),colorScheme:"teal",variant:"outline",onClick:o,children:"Import from .torrent file"}),(0,t.jsxs)(y.u_,{isOpen:a,onClose:s,size:"xl",children:[(0,t.jsx)(I.Z,{}),(0,t.jsxs)(_.h,{children:[(0,t.jsx)(z.x,{children:"Import from .torrent file"}),(0,t.jsx)(F.o,{}),(0,t.jsxs)(A.f,{children:[(0,t.jsx)(Dropzone,{onFileAccepted:importFile}),d]}),(0,t.jsx)(S.m,{children:(0,t.jsx)(c.z,{colorScheme:"red",onClick:s,children:"Cancel"})})]})]})]})}var P=r(8276);let X=(0,V.forwardRef)((e,n)=>(0,t.jsx)(E.g,{transition:"height none",minH:"unset",overflow:"hidden",w:"100%",resize:"none",ref:n,minRows:1,as:P.Z,...e}));var K=r(2757),codeblock_CodeContainer=function(e){return(0,t.jsx)(a.xu,{padding:"5",rounded:"8px",bg:(0,o.ff)("gray.100","gray.900"),...e})},codeblock=function(e){let{code:n}=e;return(0,t.jsx)(a.xu,{position:"relative",zIndex:"0",children:(0,t.jsx)(codeblock_CodeContainer,{overflow:"hidden",wordBreak:"break-all",children:n})})},Y=r(3978),editor_CopyButton=function(e){let{code:n}=e,{hasCopied:r,onCopy:l}=(0,Y.V)(n);return(0,t.jsx)(c.z,{leftIcon:(0,t.jsx)(N.owE,{}),variant:"outline",onClick:l,children:r?"Copied":"Copy magnet link"})};function Export(e){let{torrentObject:n}=e,{infoHash:r}=n,l=/^[0-9a-fA-F]{40}$/i.test(r),i=l?(0,M.lC)(function(e){let n={...e};return 0==+n.xl&&delete n.xl,n.announce=n.announce.split("\n").filter(Boolean),n}(n)):"Specify valid Info Hash to generate magnet link",a=null;return l&&(a=(0,t.jsxs)(f.K,{direction:{base:"column",md:"row"},spacing:1,mb:3,children:[(0,t.jsx)(editor_CopyButton,{code:i}),(0,t.jsx)(s.r,{href:"https://itorrents.org/torrent/".concat(r,".torrent"),isExternal:!0,children:(0,t.jsx)(c.z,{leftIcon:(0,t.jsx)(p.xNt,{}),variant:"outline",w:"100%",children:"Download .torrent from cache"})})]})),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(K.X,{size:"lg",mb:2,children:"Result"}),a,(0,t.jsx)(codeblock,{code:i})]})}var $=r(6712),G=r(1170),ee=r(4040),en=r(8230);let er=["best","best_ip","all","all_ip","all_udp","all_http","all_https","all_ws"];function Trackers(e){let{announce:n,changeField:l,clearAnnounce:i,replaceAnnounce:a}=e,addFromTrackerslist=e=>async()=>{let t=await r.g.fetch("https://cdn.jsdelivr.net/gh/ngosang/trackerslist@master/trackers_".concat(e,".txt")),l=await t.text(),i=l.split("\n").filter(Boolean);a(Array.from(new Set(n.split("\n").concat(i))).filter(Boolean).join("\n"))};return(0,t.jsxs)(k.NI,{id:"xl",mt:7,children:[(0,t.jsx)(v.l,{children:"Trackers"}),(0,t.jsxs)(f.K,{direction:{base:"column",md:"row"},spacing:1,my:2,children:[(0,t.jsx)(c.z,{leftIcon:(0,t.jsx)(j.lp8,{}),colorScheme:"red",variant:"outline",onClick:i,disabled:""===n.trim(),children:"Clear"}),(0,t.jsxs)($.v,{children:[(0,t.jsx)(G.j,{as:c.z,variant:"outline",rightIcon:(0,t.jsx)(j.RiI,{}),children:"Add from trackerslist*"}),(0,t.jsx)(ee.q,{children:er.map(e=>(0,t.jsx)(en.s,{onClick:addFromTrackerslist(e),children:e},e))})]})]}),(0,t.jsx)(X,{value:n,name:"announce",onChange:l}),(0,t.jsx)(k.Q6,{children:"List of the trackers which will be used to find peers"}),(0,t.jsxs)(k.Q6,{children:["*",(0,t.jsx)(s.r,{href:"https://github.com/ngosang/trackerslist",textDecoration:"underline",isExternal:!0,children:"trackerslist"})," ","- is a daily updated list of public bittorrent trackers"]})]})}let et={infoHash:"",name:"",announce:"",xl:"",edited:!1},el=(0,b.Ue)(e=>({...et,clear:()=>e(et),replace:n=>e({...et,...n,edited:!0}),changeField:n=>{let{name:r,value:t}=n.target;e({[r]:t,edited:!0})},changeName:n=>{let{value:r}=n.target;e({name:r.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/g," "),edited:!0})},clearAnnounce:()=>e({announce:"",edited:!0}),replaceAnnounce:n=>e({announce:n,edited:!0})}));function Editor(){let e=el(e=>e.replace),n=el(e=>e.changeField),r=el(e=>e.edited),l=el(e=>e.infoHash),i=el(e=>e.name),o=el(e=>e.changeName),d=el(e=>e.announce),h=el(e=>e.clearAnnounce),x=el(e=>e.replaceAnnounce),u=el(e=>e.xl);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(f.K,{direction:{base:"column",md:"row"},spacing:1,children:[(0,t.jsx)(ImportMagnetModal,{replaceEditorState:e}),(0,t.jsx)(ImportTorrentFileModal,{replaceEditorState:e}),(0,t.jsx)(c.z,{leftIcon:(0,t.jsx)(j.lp8,{}),colorScheme:"red",variant:"outline",onClick:el(e=>e.clear),disabled:!r,children:"Reset form"})]}),(0,t.jsxs)(g.M,{columns:{sm:1,md:2},mt:5,spacing:8,children:[(0,t.jsxs)(a.xu,{children:[(0,t.jsxs)(k.NI,{id:"infoHash",isRequired:!0,children:[(0,t.jsx)(v.l,{children:"Info Hash"}),(0,t.jsx)(w.I,{name:"infoHash",value:l,maxLength:40,onChange:n}),(0,t.jsxs)(k.Q6,{children:["Unique hash of a torrent, learn more"," ",(0,t.jsx)(s.r,{isExternal:!0,textDecoration:"underline",href:"https://stackoverflow.com/a/28601408/5257518",children:"here"})]})]}),(0,t.jsxs)(k.NI,{id:"name",mt:7,children:[(0,t.jsx)(v.l,{children:"Name"}),(0,t.jsx)(X,{name:"name",value:i,onChange:o}),(0,t.jsx)(k.Q6,{children:"It will appear in the torrent client, not required"})]}),(0,t.jsxs)(k.NI,{id:"xl",mt:7,children:[(0,t.jsx)(v.l,{children:"Size (in bytes)"}),(0,t.jsx)(w.I,{name:"xl",value:u,onChange:n}),(0,t.jsx)(k.Q6,{children:"Allows to show size in the torrent client before data is aquired from the peers. Not required, may be unsupported by some clients"})]}),(0,t.jsx)(Trackers,{announce:d,changeField:n,clearAnnounce:h,replaceAnnounce:x})]}),(0,t.jsx)(a.xu,{children:(0,t.jsx)(Export,{torrentObject:{infoHash:l,name:i,announce:d,xl:u}})})]})]})}function Home(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Header,{}),(0,t.jsxs)(i(),{children:[(0,t.jsx)("title",{children:"Magnets - Online Magnet Links Editor"}),(0,t.jsx)("meta",{name:"description",content:"Magnets is a visual magnet link generator, editor and parser. Convert torrent files to magnets and vice versa, edit and import trackers, and much more"})]}),(0,t.jsx)(a.xu,{mx:"auto",p:"6",maxW:"1200px",children:(0,t.jsx)(Editor,{})})]})}},1982:function(){}},function(e){e.O(0,[660,365,594,479,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);